---
title: "SORACOM Orbit向けGitHub Actionを作りました"
emoji: "⛳"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["soracom","github","action","orbit"]
published: false
---
# この記事は

SORACOM Orbitの開発を促進するためのGitHub Actionを作ったお話しです。  

# これまでのSORACOM Orbitの開発とその問題

SORACOM Orbitの開発は、基本的には[公式ドキュメント](https://users.soracom.io/ja-jp/docs/orbit/)に沿って進めていきます。  
ざっくりと手順を説明しますと、

- 開発環境をダウンロードする
- 環境に含まれているdevContainerを使って開発する
- ビルドしたsoraletをSORACOMコンソールないしはSORACOM cliでデプロイする
- デプロイしたsoraletをSIMグループに紐付ける

という流れになります。  
soraletはSORACOM内部でバージョン管理が行われており、SIMグループに紐付ける際は特定のバージョンか、LATEST(その時の最新のバージョン)を指定します。

さて、この流れでやってると以下のような問題が起こることがあります(私が実際やらかしました・・・)。

- 間違えて古いバイナリをアップロードしてしまう
- アップロード時のパラメータ指定を間違えて、想定していないsoraletにアップロードしてしまう
- アップロード先のsoraletのLATESTを参照しているグループがあって不具合が発生する

SORACOM Orbit以外でも似たような話、結構耳にしますよね？  
こういった事故を防ぐためには、ちゃんとCI/CDのパイプラインを作っておくのが大事です。そこで、GitHub Actionを使ってCI/CDのパイプラインを作ってみました。パイプラインを作った件については会社ブログに書いたので、以下の記事を参照してください。

[GitHubを活用してSORACOM Orbitの開発を加速する: CI/CD編](https://aadojo.alterbooth.com/entry/2023/04/28/110621)

さて、上記記事ではひとまずGitHubでのCI/CDは実現できていますが、SORACOM cliコマンドを駆使していてシェルスクリプトを書いてるのとほぼ変わらない状態です。これはちょっと美しくないし、使い回しにくいです。そこで、カスタムGitHub Actionを作ってみることにしました。

